<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Simple Update Protocol</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Simple Update Protocol">
<meta name="generator" content="xml2rfc v1.33 (http://xml.resource.org/)">
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: small; color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: small; font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: small; font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: small; text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">P. Buchheit</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">FriendFeed</td></tr>
<tr><td class="header">Intended status: Experimental</td><td class="header">D. Clinton, Ed.</td></tr>
<tr><td class="header">Expires: July 10, 2009</td><td class="header">Google</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">January 6, 2009</td></tr>
</table></td></tr></table>
<h1><br />Simple Update Protocol<br />draft-clinton-sup-00</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on July 10, 2009.</p>

<h3>Abstract</h3>

<p>
	This specification defines the Simple Update Protocol, a
	mechanism by which content feed publishers can signal to feed
	consumers that certain feeds have been updated.
      
</p>
<h3>Editorial Note</h3>

<p>
	To provide feedback on this Internet-Draft, join the
	<a href='http://friendfeed.com/rooms/simple-update-protocol'>Simple Update Protocol room</a> on FriendFeed.
      
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Notational Conventions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Design Considerations<br />
<a href="#anchor4">2.</a>&nbsp;
Overview<br />
<a href="#sup-feed">3.</a>&nbsp;
SUP Feed<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.1.</a>&nbsp;
The 'updates' field<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.2.</a>&nbsp;
The 'period' field<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.3.</a>&nbsp;
The 'since_time' field<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.4.</a>&nbsp;
The 'updated_time' field<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.5.</a>&nbsp;
The 'available_periods' field<br />
<a href="#sup-id">4.</a>&nbsp;
SUP ID<br />
<a href="#update-id">5.</a>&nbsp;
Update ID<br />
<a href="#discovery">6.</a>&nbsp;
Discovery<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#x-sup-id">6.1.</a>&nbsp;
'X-SUP-ID' HTTP header<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sup-link">6.2.</a>&nbsp;
atom:link Element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">6.3.</a>&nbsp;
HTTP 'Link' header [Ed: proposed]<br />
<a href="#anchor11">7.</a>&nbsp;
Examples<br />
<a href="#anchor12">8.</a>&nbsp;
Security Considerations<br />
<a href="#iana">9.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informative References<br />
<a href="#anchor15">Appendix&nbsp;A.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
	SUP (Simple Update Protocol) consists of a notification format
	that feed publishers can use to alert consumers that one or
	more content feeds have been recently updated. The presence of
	a SUP feed allows for increased efficiency, and decreased
	latency, by reducing or eliminating the need for consumers to
	frequently poll each underlying feed individually.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Notational Conventions</h3>

<p>
	  The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
	  "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
	  and "OPTIONAL" in this document are to be interpreted as
	  described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
	
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Design Considerations</h3>

<p>
	  SUP feeds are designed to be easy for publishers to create,
          increasing in benefit as the number of underlying feeds
          grows.  Consumers that read a large number of feeds from a
          given publisher, such as a blog aggregators, hosted feed
          readers, or intermediary publishers, will similarly benefit
          most from using the SUP feed to reduce polling rates for
          individual feeds and query only when updates are available.
	
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Overview</h3>

<p>
	Publishers that produce large numbers of content feeds can
	aggregate a list of feeds that have changed over a given time
	period and publish this list as a <a class='info' href='#sup-feed'>SUP
	Feed<span> (</span><span class='info'>SUP Feed</span><span>)</span></a> to consumers.  Each underlying content feed is
	identified by an opaque token called
	a <a class='info' href='#sup-id'>SUP ID<span> (</span><span class='info'>SUP ID</span><span>)</span></a>, which consumers can
	associate with a previously-seen feed URL, which can then be
	re-queried as necessary.  Publishers use
	the <a class='info' href='#x-sup-id'>X-SUP-ID HTTP header<span> (</span><span class='info'>'X-SUP-ID' HTTP header</span><span>)</span></a> and
	the
	<a class='info' href='#sup-link'>atom:link element<span> (</span><span class='info'>atom:link Element</span><span>)</span></a> with each
	content feed to announce the feed's unique SUP ID and the
	location of the SUP feed itself.
      
</p>
<a name="sup-feed"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
SUP Feed</h3>

<p>
	[Ed: Perhaps consider changing the name of this to 'Updates
	Feed' to reduce redundancy.  Also, "feed" itself might be a
	misleading term, as each new version tends to overwrite the
	last completely.  Perhaps "Updates Document" is better?]
      
</p>
<p>
	A SUP feed consists of a document of type 'application/json'
	containing a single top-level
	<a class='info' href='#RFC4627'>JSON Object<span> (</span><span class='info'>Crockford, D., &ldquo;The application/json Media Type for JavaScript Object Notation (JSON),&rdquo; July&nbsp;2006.</span><span>)</span></a> [RFC4627], mapping a set
	well-known keys to well-defined values, as defined
	below.
      
</p>
<p>
	Consumers SHOULD ignore any unanticipated keys in the JSON
	document and continue to parse the expected values as
	intended.
      
</p>
<p>
	The overall structure of the SUP feed is as follows:
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>{
    "updates": [ ... ],
    "period": ...,
    "since_time": ...,
    "updated_time": ...,
    "available_periods": { ... },
}</pre></div>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
The 'updates' field</h3>

<p>
	  A <a class='info' href='#RFC4627'>JSON List<span> (</span><span class='info'>Crockford, D., &ldquo;The application/json Media Type for JavaScript Object Notation (JSON),&rdquo; July&nbsp;2006.</span><span>)</span></a> [RFC4627] of two-element
	  JSON Lists, each containing the tuple
	  (<a class='info' href='#sup-id'>SUP
	  ID<span> (</span><span class='info'>SUP ID</span><span>)</span></a>, <a class='info' href='#update-id'>Update ID<span> (</span><span class='info'>Update ID</span><span>)</span></a>).
	
</p>
<p>
	  This field is OPTIONAL. It MAY contain an empty list if no
	  content feeds have been updated in the given interval.
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>"updates": [
    ["14ea1a46", "16NV"],
    ["a2f57d4b", "16Nx"],
    ["584c7e6c", "16NV"]
]</pre></div>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
The 'period' field</h3>

<p>
	  A positive integer representing the the duration of time
	  covered by this feed, in seconds.
	
</p>
<p>
	  This field is REQUIRED.
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>"period": 60</pre></div>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
The 'since_time' field</h3>

<p>
	  An <a class='info' href='#RFC3339'>[RFC3339]<span> (</span><span class='info'>Klyne, G., Ed. and C. Newman, &ldquo;Date and Time on the Internet: Timestamps,&rdquo; July&nbsp;2002.</span><span>)</span></a> formatted string representing
	  the start time of the interval covered by this feed.
	
</p>
<p>
	  This field is REQUIRED.
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>"since_time": "2009-01-06T00:48:38Z"</pre></div>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
The 'updated_time' field</h3>

<p>
	  An <a class='info' href='#RFC3339'>[RFC3339]<span> (</span><span class='info'>Klyne, G., Ed. and C. Newman, &ldquo;Date and Time on the Internet: Timestamps,&rdquo; July&nbsp;2002.</span><span>)</span></a> formatted string representing
	  the end time of the interval covered by this feed.
	
</p>
<p>
	  This field is REQUIRED.
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>"updated_time": "2009-01-06T00:50:48Z"</pre></div>
<p>
	  The delta in seconds between the 'start_time' and the
	  'updated_time' fields MUST be equal to or greater than the
	  duration indicated by the 'period' field.
        
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
The 'available_periods' field</h3>

<p>
	  A JSON Object mapping time periods (in seconds) to URLs
	  where an additional SUP feed of the corresponding duration
	  may be found.
	
</p>
<p>
	  This field is OPTIONAL.
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>"available_periods": {
    "60": "http://example.com/sup.json?seconds=60",
    "300": "http://example.com/sup.json?seconds=300",
    "600": "http://example.com/sup.json?seconds=600"
}</pre></div>
<a name="sup-id"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
SUP ID</h3>

<p>
	[Ed: Perhaps consider changing this to 'Resource Id' to reduce
	redundancy.  And more generally, consider calling the
	underlying documents "resources" rather than "feeds", as the
	SUP technique isn't specific to only Atom or RSS content.]
      
</p>
<p>
	A SUP ID is a short opaque string used to identify a
	individual content feed.  A single feed MUST always map to a
	single, stable SUP ID, but different feeds MAY occasionally
	share the same SUP ID.
      
</p>
<p>
	Consumers SHOULD NOT attempt to parse or interpret the
	contents of the string, but instead should maintain their own
	mapping of SUP IDs to resource URIs.  The mapping of SUP ID to
	resource URI is established via
	the <a class='info' href='#discovery'>Discovery<span> (</span><span class='info'>Discovery</span><span>)</span></a> mechanisms
	defined below.
      
</p>
<p>
	A valid SUP ID is a non-empty string of no more than 128
	characters composed of ASCII letters, numbers, or hyphens
	(regex [a-zA-Z0-9-]), and are produced via the following
	rules, as defined by the
	<a class='info' href='#RFC5234'>augmented BNF<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a> [RFC5234] syntax.
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>sup_id = 1*128(CHAR / DIGIT / "_")</pre></div>
<a name="update-id"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Update ID</h3>

<p>
	[Ed: Consider changing the name of this to "Revision Id".]
      
</p>
<p>
	The Update ID is a short opaque string used to disambiguate
	distinct updates to a content feed.  In practice, the last
	update timestamp of the content feed is a suitable identifier,
	but clients SHOULD NOT attempt to parse or intepret the
	contents of the string.
      
</p>
<p>
	A valid Update ID is a non-empty string of no more than 128
	characters composed of ASCII letters, numbers, or hyphens
	(regex [a-zA-Z0-9-]), and are produced via the following
	rules, as defined by the
	<a class='info' href='#RFC5234'>augmented BNF<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a> [RFC5234] syntax.
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>update_id = 1*128(CHAR / DIGIT / "_")</pre></div>
<a name="discovery"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Discovery</h3>

<p>
	This section discusses how a publisher signals the existence
	of SUP feed.
      
</p>
<p>
	Feeds SHOULD announce the availabilty of by setting the
	<a class='info' href='#x-sup-id'>'X-SUP-ID' HTTP header<span> (</span><span class='info'>'X-SUP-ID' HTTP header</span><span>)</span></a>, and/or
	by including a <a class='info' href='#sup-link'>'atom:link'
	element<span> (</span><span class='info'>atom:link Element</span><span>)</span></a>, or both.
      
</p>
<p>
	Use of the 'X-SUP-ID' HTTP header is RECOMMENDED since it
	works for feed types, but feed consumers SHOULD be prepared
	for the presence of the link element in addition to, or
	instead of, the X-SUP-ID header.
      
</p>
<a name="x-sup-id"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
'X-SUP-ID' HTTP header</h3>

<p>
	  Responses to <a class='info' href='#RFC2616'>HTTP<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616] requests for
	  content feeds SHOULD include a <a class='info' href='#RFC2616'>HTTP
	  Response Header<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616] of 'X-SUP-ID' to signal both the URI
	  at which the <a class='info' href='#sup-feed'>SUP feed<span> (</span><span class='info'>SUP Feed</span><span>)</span></a> may be
	  polled and the <a class='info' href='#sup-id'>SUP ID<span> (</span><span class='info'>SUP ID</span><span>)</span></a> of the
	  underlying content feed.
	
</p>
<p>
	  Valid 'X-SUP-ID' headers are produced via the following
	  rules, as defined by the
	  <a class='info' href='#RFC5234'>augmented BNF<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a> [RFC5234] syntax, the URI
	  production grammar defined in <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>, and
	  the above grammar defining
	  the <a class='info' href='#sup-id'>'sup_id'<span> (</span><span class='info'>SUP ID</span><span>)</span></a> production.
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>x_sup_id_header   = "X-SUP-ID" ":" 1*SP updates_uri
updates_uri       = scheme ":" hier-part [ "?" query ] [ "#" sup_id ]
</pre></div>
<p>
	  For example, the following 'X-SUP-ID' header refers to a SUP
	  Feed at 'http://example.com/sup.json' and indicates that the
	  SUP ID of the resource being returned is '4496672d'.
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>X-SUP-ID: http://example.com/sup.json#4496672d</pre></div>
<a name="sup-link"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
atom:link Element</h3>

<p>
	  In addition to, or instead of,
	  the <a class='info' href='#x-sup-id'>'X-SUP-ID' HTTP header<span> (</span><span class='info'>'X-SUP-ID' HTTP header</span><span>)</span></a>,
	  XML-based resources MAY include
	  the <a class='info' href='#RFC4287'>Atom Syndication Format<span> (</span><span class='info'>Nottingham, M. and R. Sayre, &ldquo;The Atom Syndication Format,&rdquo; December&nbsp;2005.</span><span>)</span></a> [RFC4287]
	  'atom:link' element to signal both the URI at which
	  the <a class='info' href='#sup-feed'>SUP feed<span> (</span><span class='info'>SUP Feed</span><span>)</span></a> may be polled
	  and the <a class='info' href='#sup-id'>SUP ID<span> (</span><span class='info'>SUP ID</span><span>)</span></a> of the
	  underlying content feed.
	
</p>
<p>
	  The 'rel' value of the atom:link element is defined as
	  follows: [Ed: This should change.  See IANA Considerations
	  below.]
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>http://api.friendfeed.com/2008/03#sup</pre></div>
<p>
	  The 'type' value of the atom:link element is defined as follows:
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>application/json</pre></div>
<p>
	  The 'href' value of the atom:link element is produced via
	  the via the following rules, as defined by the
	  <a class='info' href='#RFC5234'>augmented BNF<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a> [RFC5234] syntax, the URI
	  production grammar defined in <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>, and
	  the above grammar defining
	  the <a class='info' href='#sup-id'>'sup_id'<span> (</span><span class='info'>SUP ID</span><span>)</span></a> production.
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>updates_uri = scheme ":" hier-part [ "?" query ] [ "#" sup_id ]</pre></div>
<p>
	  For example, the following 'atom:link' refers to a SUP feed
	  at 'http://example.com/sup.json' and indicates that the SUP
	  ID of the feed itself is '4496672d'.
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>&lt;link xmlns="http://www.w3.org/2005/Atom"
      rel="http://api.friendfeed.com/2008/03#sup"
      type="application/json"
      title="Updates Feed"
      href="http://example.com/sup.json#4496672d"/&gt;</pre></div>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
HTTP 'Link' header [Ed: proposed]</h3>

<p>
	  [Ed: Perhaps HTTP Link headers, as formalized in
	  <a class='info' href='#nottingham-http-link-header'>[nottingham&#8209;http&#8209;link&#8209;header]<span> (</span><span class='info'>Nottingham, M., &ldquo;Link Relations and HTTP Header Linking,&rdquo; December&nbsp;2008.</span><span>)</span></a>, could be used
	  instead of, or in addition to, the one-off X-SUP-ID header.
	  For example, the following conveys the same information in a
	  more standardized manner, and is more consistent with the
	  'atom:link' entry in the feed itself.]
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>Link: &lt;http://example.com/sup.json#276b6c46&gt;;
    rel="http://api.friendfeed.com/2008/03#sup";
    type="application/json";
    title="Updates Feed"</pre></div>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Examples</h3>

<p>
	A SUP feed indicating that five content feeds were updated in
	the interval between 1:14:35 and 1:16:45.
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>{
  "available_periods": {
    "60": "http://example.com/sup.json?seconds=60",
    "300": "http://example.com/sup.json?seconds=300",
    "600": "http://example.com/sup.json?seconds=600"
  },
  "period": 60,
  "since_time": "2009-01-06T01:14:35Z",
  "updated_time": "2009-01-06T01:16:45Z",
  "updates": [
    [
      "4496672d",
      "16fg"
    ],
    [
      "e8d50639",
      "16fg"
    ],
    [
      "e7cd6949",
      "16eA"
    ],
    [
      "1d8274dd",
      "16eA"
    ],
    [
      "19ab3751",
      "16eA"
    ],
  ]
}</pre></div>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p>
	[Ed: Address any known security concerns here, with an
	emphasis on documenting real risks to either publishers or
	consumers.]
      
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA Considerations</h3>

<p>
	[Ed: Document a proposed permanent link relation value here
	(instead of "http://api.friendfeed.com/2008/03#sup").  Perhaps
	"updates"?]
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="ftp://ftp.isi.edu/in-notes/rfc2616.txt">TXT</a>, <a href="ftp://ftp.isi.edu/in-notes/rfc2616.ps">PS</a>, <a href="ftp://ftp.isi.edu/in-notes/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3339">[RFC3339]</a></td>
<td class="author-text"><a href="mailto:GK@ACM.ORG">Klyne, G., Ed.</a> and <a href="mailto:chris.newman@sun.com">C. Newman</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3339">Date and Time on the Internet: Timestamps</a>,&rdquo; RFC&nbsp;3339, July&nbsp;2002 (<a href="ftp://ftp.isi.edu/in-notes/rfc3339.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3339.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3339.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="ftp://ftp.isi.edu/in-notes/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4287">[RFC4287]</a></td>
<td class="author-text">Nottingham, M. and R. Sayre, &ldquo;<a href="http://tools.ietf.org/html/rfc4287">The Atom Syndication Format</a>,&rdquo; RFC&nbsp;4287, December&nbsp;2005 (<a href="http://ftp.rfc-editor.org/in-notes/rfc4287.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4627">[RFC4627]</a></td>
<td class="author-text">Crockford, D., &ldquo;<a href="http://tools.ietf.org/html/rfc4627">The application/json Media Type for JavaScript Object Notation (JSON)</a>,&rdquo; RFC&nbsp;4627, July&nbsp;2006 (<a href="ftp://ftp.isi.edu/in-notes/rfc4627.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="ftp://ftp.isi.edu/in-notes/rfc5234.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="nottingham-http-link-header">[nottingham-http-link-header]</a></td>
<td class="author-text"><a href="mailto:mnot@mnot.net">Nottingham, M.</a>, &ldquo;<a href="http://tools.ietf.org/id/draft-nottingham-http-link-header-03.txt">Link Relations and HTTP Header Linking</a>,&rdquo; December&nbsp;2008.</td></tr>
</table>

<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Acknowledgements</h3>

<p>
        The author acknowledges the contributions of [Ed: P. Buchheit should edit this section].
      
</p>
<p>
        The editor would like to thank Adewale Oshineye for publishing
        an earlier interpretation of the SUP specification that helped
        form the basis for this document.
      
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Paul Buchheit</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">FriendFeed</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:[Ed: Paul -- do you want your email published?]">[Ed: Paul -- do you want your email published?]</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://paulbuchheit.blogspot.com/">http://paulbuchheit.blogspot.com/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">DeWitt Clinton (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Google</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dewitt@unto.net">dewitt@unto.net</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://unto.net/">http://unto.net/</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2009).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
